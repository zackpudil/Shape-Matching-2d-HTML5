<html>
	<head>
		<title>Deformable</title>
		<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
		
		<script src="lib/array.ext.js" type="text/javascript"></script>
		<script src="math2d/vector.js" type="text/javascript"></script>
		<script src="math2d/matrix.js" type="text/javascript"></script>
		<script src="phys/particle.js" type="text/javascript"></script>
		<script src="phys/body.js" type="text/javascript"></script>
		<script src="world/renderer.js" type="text/javascript"></script>
		<script src="world/bounds.js" type="text/javascript"></script>
		<script src="world/scene.js" type="text/javascript"></script>
		<script src="world/actor.js" type="text/javascript"></script>
		
		<script src="demo.js" type="text/javascript"></script>
	</head>
	
	<body>
		<canvas id="canvas" width="500" height="500" style="border: 1px solid black">
			Click here to create a shape.
		</canvas>
		<br />
		<p>
			<label for="stiffness">Stiffness</label><input id="stiffness" type="range" min="0.1" max="1" step="0.1" value="1" /><br />
			<label for="gravity">Gravity</label><input id="gravity" type="range" min="0" max="15" step="0.5" value="8" />
		</p>
		<p>
			<button id="start">Animate</button>
			<button id="reset">Reset</button>
		</p>

	</body>
	
	<script type="text/javascript">
		var canvas = document.getElementById('canvas');
		var context = canvas.getContext('2d');
		
		var instructions = function() {
			context.font = '15pt Calibri';
			context.fillStyle = '#8372F2';
			context.fillText("Create shapes by clicking to add vertices.", 10, canvas.height/2-42);
			context.fillText("Once you are done creating shape, click animate.", 10, canvas.height/2-20);
			context.fillText("Once you are done playing, click reset to start over.", 10, canvas.height/2+2);
		};
		
		var demo = new Demo(canvas);
		
		$('#stiffness').change(demo.stiffnessSliderChange);
		$('#gravity').change(demo.gravitySliderChange);
				
		$('#canvas').mousedown(demo.drawingMouseDown);
		instructions();
	
		$('#start').click(function(e) {
			if(!demo.animate())
				return;
				
			$('#canvas').unbind('mousedown');
			$('#canvas').mousedown(demo.animateMouseDown);
			$('#canvas').mouseup(demo.mouseUp);
			$('#canvas').mousemove(demo.mouseMove)
		});
		
		$('#reset').click(function(e) {
			demo.reset();
			instructions();
			$('#canvas').unbind('mousedown');
			$('#canvas').mousedown(demo.drawingMouseDown);
		})
		
	</script>
</html>